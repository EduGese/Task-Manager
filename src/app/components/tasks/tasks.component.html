                                      <!-- LIST -->

<ion-list>
  @for (task of taskList; track $index) {
  <ion-item-sliding>
    <ion-item lines="none">
      <ion-grid>
        <ion-row>
          <ion-col>
            <div class="ion-text-start" (click)="openModalDetails(task)">
              <ion-text color="primary" [ngClass]="task.done === 1 ? 'task-done':''">{{task.name}}</ion-text>
            </div>
          </ion-col>
          <ion-col>
            <ion-grid>
              <ion-row>
                <ion-col>
                  <ion-chip [color]="priorityColor(task.priority)">
                    <ion-label>{{ task.priority }}</ion-label>
                  </ion-chip>
                </ion-col>
                <ion-col>
                  <ion-icon size="medium" [name]="tagIcon(task.tag)" class="ion-no-margin"
                    [color]="tagIconColor(task.tag)"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-col>
          <ion-col>
            @if(task.due_date !== ''){
            <div class="date">
              <span class="week-day">{{ task.due_date | date:' E'}} </span> <span class="month-date">{{ task.due_date | date:'d'}}</span> <span class="of"> of </span>
              <span>{{task.due_date |
                date:"LLL"}}</span>
            </div>
            } @else {
            <div>
              <span><ion-text color="medium">No date</ion-text> </span>
            </div>
            }
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item-options side="end">
      <ion-item-option (click)="openActionSheet(task)">Options</ion-item-option>
      <ion-item-option color="danger" (click)="deleteTask(task.id)">Delete</ion-item-option>
    </ion-item-options>
    <ion-item-options side="start">
      <ion-item-option [color]="task.done === 0 ? 'success' : 'warning'  " (click)="completeTask(task)">
        @if (task.done === 0) {
          Mark as complete
        }@else {
          Mask as uncomplete
        }
      </ion-item-option>
    </ion-item-options>
  </ion-item-sliding>
  }
</ion-list>

                                      <!-- Modal Details-->
<ion-modal [isOpen]="modalDetailsTrigger">
  <ng-template>
   <ion-header>
    <ion-toolbar color="primary">
      <ion-title>{{task.name}}</ion-title>
    </ion-toolbar>
   </ion-header>
   <ion-content>
    @if (task.description !== '') {
      <ion-item>{{task.description}}</ion-item>
    }@else {
      <ion-item ><ion-text color="medium">No description</ion-text>
        </ion-item>
    }
    
    <ion-item>
      <ion-label color="primary">Date creation</ion-label>
      <div class="date">
        <span>{{ task.creation_date | date:' E'}} </span> , <span>{{ task.creation_date | date:'d'}}</span> of <span>{{task.creation_date |
          date:"LLL"}} </span> of <span> {{ task.creation_date | date:'YYYY' }}</span>
      </div>

    </ion-item>
    <ion-item>
      <ion-label color="primary">Date end</ion-label>
      @if (task.due_date !== '') {
        <div class="date">
          <span>{{ task.due_date | date:' E'}} </span> , <span>{{ task.due_date | date:'d'}}</span> of <span>{{task.due_date |
            date:"LLL"}} </span> of <span> {{ task.due_date | date:'YYYY' }}</span>
        </div>
      }@else {
        <ion-item ><ion-text color="medium">No date has been set</ion-text>
        </ion-item>
      }
    </ion-item>
    <ion-item>
      <ion-label color="primary">Priority</ion-label>
      <ion-chip [color]="priorityColor(task.priority)">
        <ion-label>{{ task.priority }}</ion-label>
      </ion-chip>
    </ion-item>
    <ion-item>
      <ion-label color="primary">Tag</ion-label>
      <ion-text [color]="tagIconColor(task.tag)" class="ion-margin-end">{{ task.tag }}</ion-text>
      <ion-icon size="medium" [name]="tagIcon(task.tag)" class="ion-no-margin"
      [color]="tagIconColor(task.tag)"></ion-icon>
    </ion-item>
    
   </ion-content>
   <ion-footer >
   <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-icon size="large" name="close-circle" color="primary" (click)="closeModalDetails()"></ion-icon>
    </ion-row>
   </ion-grid>
      
    
  </ion-footer>
  </ng-template>
</ion-modal>

                                      <!-- Modal FormEdit-->

<ion-modal [isOpen]="modalFormTrigger" >
  <ng-template>
    <ion-header >
      <ion-toolbar color="primary">
        <ion-title>New task</ion-title>
        <ion-buttons slot="end" >
          <ion-icon size="large" name="close-circle-outline" (click)="closeModalEditForm()"></ion-icon>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content [fullscreen]="true">
      <app-task-form [isEditForm]="isEditForm" [task]="task" (taskEmitted)="editTask($event)"></app-task-form>
    </ion-content>
  </ng-template>
</ion-modal>